{% extends 'base.html' %}
{% load humanize %}
{% block page_title %}Добавление платежа по займу{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <h4>Добавление платежа по займу</h4>
            </div>
            <div class="card-body">
                <div class="alert alert-info">
                    <strong>Займ:</strong> {{ loan.contractor }}<br>
                    <strong>Тип:</strong> {{ loan.get_loan_type_display }}<br>
                    <strong>Сумма:</strong> {{ loan.amount|intcomma }} сом<br>
                    <strong>Остаток к возврату:</strong> {{ loan.remaining_amount|intcomma }} сом<br>
                    <strong>Текущий баланс Общага:</strong> {{ loan.common_cash.balance|intcomma }} сом
                </div>
                
                <form method="post">
                    {% csrf_token %}
                    
                    <div class="mb-3">
                        <label for="{{ form.amount.id_for_label }}" class="form-label">Сумма платежа</label>
                        {{ form.amount }}
                    </div>
                    
                    <div class="mb-3">
                        <label for="{{ form.payment_date.id_for_label }}" class="form-label">Дата платежа</label>
                        {{ form.payment_date }}
                    </div>
                    
                    <div class="mb-3">
                        <label for="{{ form.comment.id_for_label }}" class="form-label">Комментарий</label>
                        {{ form.comment }}
                    </div>
                    
                    <div class="d-grid gap-2">
                        <button type="submit" class="btn btn-primary">Добавить платеж</button>
                        <a href="{% url 'finances:loan_detail' loan.id %}" class="btn btn-secondary">Отмена</a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}