{% extends "public_site/base.html" %}
{% load static %}
{% load i18n %}

{% block title %}{% trans "–ì–ª–∞–≤–Ω–∞—è" %}{% endblock %}

{% block extra_css %}
<style>
    /* HERO / Carousel */
    .hero-carousel-wrapper { margin-bottom: 28px; }
    .hero-carousel {
        border-radius: 28px;
        overflow: hidden;
        box-shadow: 0 26px 60px rgba(0,0,0,0.35);
    }
    .hero-slide {
        position: relative;
        min-height: 460px;
        color: #f9fafb;
        display: flex;
        align-items: center;
    }
    @media (max-width: 576px) { .hero-slide { min-height: 520px; } }

    .hero-slide-bg {
        position: absolute;
        inset: 0;
        background-size: cover;
        background-position: center;
        transform: scale(1.04);
    }
    .hero-slide-overlay {
        position: absolute;
        inset: 0;
        background:
          radial-gradient(circle at 10% 15%, rgba(255,122,0,0.45), transparent 52%),
          linear-gradient(110deg, rgba(0,0,0,0.88), rgba(0,0,0,0.18));
    }
    .hero-slide-inner {
        position: relative;
        z-index: 1;
        padding: 22px 22px 24px;
        max-width: 560px;
    }
    @media (min-width: 992px) { .hero-slide-inner { padding: 32px 40px 36px; } }

    .hero-slide-badge {
        display: inline-flex;
        align-items: center;
        gap: 7px;
        border-radius: 999px;
        padding: 7px 14px;
        background: rgba(15,23,42,0.72);
        font-size: 11px;
        text-transform: uppercase;
        letter-spacing: 0.16em;
        color: #e5e7eb;
        backdrop-filter: blur(10px);
    }
    .hero-slide-title {
        font-size: clamp(28px, 3.6vw, 38px);
        font-weight: 800;
        margin: 14px 0 10px;
        line-height: 1.06;
    }
    .hero-slide-sub {
        font-size: 14px;
        color: rgba(229,231,235,0.9);
        max-width: 420px;
        margin-bottom: 0;
    }

    .hero-slide-actions {
        margin-top: 16px;
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        align-items: center;
    }
    .hero-slide-secondary {
        border-radius: 999px;
        padding: 9px 16px;
        font-size: 13px;
        border: 1px solid rgba(248,250,252,0.35);
        color: #e5e7eb;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 8px;
        background: rgba(15,23,42,0.35);
        backdrop-filter: blur(10px);
    }
    .hero-slide-secondary:hover { background: rgba(15,23,42,0.7); color: #fff; }

    .carousel-indicators [data-bs-target] {
        width: 8px; height: 8px; border-radius: 999px;
        background-color: rgba(255,255,255,0.55);
        opacity: 0.7;
    }
    .carousel-indicators .active {
        width: 18px;
        background-image: var(--elnasip-gradient);
        opacity: 1;
    }
    .carousel-control-prev, .carousel-control-next { width: 12%; }
    .carousel-control-prev-icon, .carousel-control-next-icon {
        filter: drop-shadow(0 0 10px rgba(0,0,0,0.8));
    }

    /* Sections */
    .section { margin-bottom: 30px; }
    .section-head {
        display:flex; align-items: baseline; justify-content: space-between;
        gap: 10px; margin-bottom: 14px;
    }
    .section-title { font-size: 20px; font-weight: 800; }
    .section-note { font-size: 13px; color:#777; }

    /* Projects cards: desktop grid, mobile horizontal scroll like Royal */
    .objects-grid {
        display: grid;
        grid-template-columns: repeat(3, minmax(0, 1fr));
        gap: 14px;
    }
    @media (max-width: 992px) { .objects-grid { grid-template-columns: repeat(2, minmax(0, 1fr)); } }
    @media (max-width: 576px) {
        .objects-grid {
            display: flex;
            gap: 12px;
            overflow-x: auto;
            padding-bottom: 6px;
            scroll-snap-type: x mandatory;
        }
        .objects-grid::-webkit-scrollbar { height: 8px; }
        .objects-grid::-webkit-scrollbar-thumb { background: rgba(0,0,0,0.12); border-radius: 999px; }
    }

    .object-card {
        border-radius: 22px;
        overflow: hidden;
        background: #000;
        position: relative;
        color: #f9fafb;
        min-height: 220px;
        box-shadow: 0 18px 45px rgba(0,0,0,0.30);
        text-decoration: none;
        display: block;
    }
    @media (max-width: 576px) {
        .object-card {
            min-width: 82%;
            scroll-snap-align: start;
        }
    }

    .object-bg {
        position: absolute; inset: 0;
        background-size: cover; background-position: center;
        transform: scale(1.04);
        transition: transform .22s ease-out;
    }
    .object-overlay {
        position: absolute; inset: 0;
        background:
          linear-gradient(180deg, rgba(0,0,0,0.10), rgba(0,0,0,0.88));
    }
    .object-inner {
        position: relative; z-index: 1;
        height: 100%;
        padding: 14px 14px 14px;
        display:flex; flex-direction: column; justify-content: space-between;
    }
    .object-top {
        display:flex; justify-content: space-between; align-items: flex-start; gap: 10px;
    }
    .object-top-badge {
        display:inline-flex; align-items:center; gap:6px;
        border-radius:999px; padding:6px 10px;
        background: rgba(15,23,42,0.78);
        font-size:11px; text-transform:uppercase; letter-spacing:.12em;
        color:#e5e7eb;
        backdrop-filter: blur(10px);
    }
    .object-status {
        font-size: 12px; color: rgba(229,231,235,0.85);
        background: rgba(17,24,39,0.55);
        border: 1px solid rgba(255,255,255,0.12);
        padding: 6px 10px; border-radius: 999px;
        backdrop-filter: blur(10px);
        white-space: nowrap;
    }
    .object-name { font-size: 18px; font-weight: 800; margin-top: 8px; line-height: 1.15; }
    .object-sub { font-size: 13px; color: rgba(229,231,235,0.86); margin: 8px 0 0; max-width: 95%; }
    .object-bottom {
        display:flex; align-items:center; justify-content: space-between;
        font-size: 12px; color: rgba(229,231,235,0.9);
        margin-top: 12px;
    }
    .object-card:hover .object-bg { transform: scale(1.08); }

    /* Gallery: mobile horizontal scroll too */
    .gallery-grid {
        display:grid;
        grid-template-columns: repeat(4, minmax(0, 1fr));
        gap: 8px;
    }
    @media (max-width: 992px) { .gallery-grid { grid-template-columns: repeat(3, minmax(0, 1fr)); } }
    @media (max-width: 768px) { .gallery-grid { grid-template-columns: repeat(2, minmax(0, 1fr)); } }
    @media (max-width: 480px) {
        .gallery-grid {
            display:flex;
            overflow-x:auto;
            gap:10px;
            scroll-snap-type:x mandatory;
            padding-bottom: 6px;
        }
    }

    .gallery-item {
        border-radius: 18px;
        overflow:hidden;
        position:relative;
        background:#000;
        min-height: 140px;
        box-shadow:0 14px 35px rgba(0,0,0,0.24);
    }
    @media (max-width: 480px) {
        .gallery-item { min-width: 80%; scroll-snap-align: start; }
    }

    .gallery-bg {
        position:absolute; inset:0;
        background-size:cover; background-position:center;
        transform:scale(1.03);
        transition:transform .18s ease-out;
    }
    .gallery-overlay {
        position:absolute; inset:0;
        background:linear-gradient(180deg, transparent, rgba(0,0,0,0.85));
    }
    .gallery-item:hover .gallery-bg { transform:scale(1.08); }

    /* Installment */
    .installment-row {
        display:grid;
        grid-template-columns: minmax(0, 1.2fr) minmax(0, 1fr);
        gap:16px;
        align-items:stretch;
    }
    @media (max-width: 992px) { .installment-row { grid-template-columns: minmax(0, 1fr); } }

    .installment-card {
        border-radius: 22px;
        padding: 18px 18px 16px;
        background:#111827;
        color:#e5e7eb;
        position:relative;
        overflow:hidden;
        box-shadow:0 22px 60px rgba(15,23,42,0.8);
    }
    .installment-card::before {
        content:"";
        position:absolute; inset:-40%;
        background:
            radial-gradient(circle at 10% 10%, rgba(255,122,0,0.22), transparent 55%),
            radial-gradient(circle at 85% 80%, rgba(255,212,0,0.22), transparent 55%);
        opacity:1;
    }
    .installment-inner { position:relative; z-index:1; }
    .installment-badge {
        display:inline-flex; align-items:center; gap:6px;
        border-radius:999px; padding:6px 12px;
        background:rgba(15,23,42,0.8);
        font-size:11px; text-transform:uppercase; letter-spacing:.14em;
        color:#facc15;
    }
    .installment-title { font-size:18px; font-weight:800; margin-top:10px; margin-bottom:8px; }
    .installment-points { font-size:13px; color:#e5e7eb; list-style:none; padding-left:0; margin-bottom:10px; }
    .installment-points li::before { content:"‚Ä¢"; margin-right:6px; }

    .mini-calc {
        background:#fff;
        border-radius:20px;
        padding:14px 14px 12px;
        box-shadow:0 16px 40px rgba(0,0,0,0.12);
        font-size:13px;
    }
    .mini-calc-row { display:flex; justify-content:space-between; font-size:13px; }
    .mini-calc-row + .mini-calc-row { margin-top:4px; }
</style>
{% endblock %}

{% block content %}

<!-- HERO-–ö–ê–†–£–°–ï–õ–¨ -->
<section class="hero-carousel-wrapper">
    <div id="elnHeroCarousel" class="carousel slide hero-carousel" data-bs-ride="carousel" data-bs-interval="6500">
        <div class="carousel-indicators">
            {% for s in hero_slides %}
                <button type="button"
                        data-bs-target="#elnHeroCarousel"
                        data-bs-slide-to="{{ forloop.counter0 }}"
                        class="{% if forloop.first %}active{% endif %}"
                        {% if forloop.first %}aria-current="true"{% endif %}
                        aria-label="–°–ª–∞–π–¥ {{ forloop.counter }}"></button>
            {% endfor %}
        </div>

        <div class="carousel-inner">
            {% for s in hero_slides %}
                <div class="carousel-item {% if forloop.first %}active{% endif %}">
                    <div class="hero-slide">
                        <div class="hero-slide-bg" style="background-image:url('{% static s.image %}')"></div>
                        <div class="hero-slide-overlay"></div>
                        <div class="hero-slide-inner">
                            <div class="hero-slide-badge">{{ s.badge }}</div>
                            <h1 class="hero-slide-title">{{ s.title }}</h1>
                            <p class="hero-slide-sub">{{ s.sub }}</p>

                            <div class="hero-slide-actions">
                                <a href="{{ s.primary.href }}" class="eln-btn-primary">{{ s.primary.text }}</a>
                                <a href="{{ s.secondary.href }}" class="hero-slide-secondary">{{ s.secondary.text }}</a>
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>

        <button class="carousel-control-prev" type="button" data-bs-target="#elnHeroCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">{% trans "–ü—Ä–µ–¥—ã–¥—É—â–∏–π" %}</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#elnHeroCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">{% trans "–°–ª–µ–¥—É—é—â–∏–π" %}</span>
        </button>
    </div>
</section>

<!-- –ü–†–û–ï–ö–¢–´ -->
<section id="objects" class="section">
    <div class="section-head">
        <div class="section-title">{% trans "–ü—Ä–æ–µ–∫—Ç—ã –≠–ª –ù–∞—Å–∏–ø" %}</div>
        <div class="section-note d-none d-sm-block">{% trans "–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç ‚Äî –º—ã –ø–æ–¥–±–µ—Ä—ë–º –ø–ª–∞–Ω–∏—Ä–æ–≤–∫—É –∏ —É—Å–ª–æ–≤–∏—è –æ–ø–ª–∞—Ç—ã." %}</div>
    </div>

    <div class="objects-grid">
        {% for p in projects %}
            <a class="object-card" href="{% url 'public_site:contacts' %}?project={{ p.slug }}">
                <div class="object-bg" style="background-image:url('{% static p.image %}')"></div>
                <div class="object-overlay"></div>
                <div class="object-inner">
                    <div>
                        <div class="object-top">
                            <div class="object-top-badge">{{ p.badge }}</div>
                            <div class="object-status">{{ p.status }}</div>
                        </div>
                        <div class="object-name">{{ p.name }}</div>
                        <p class="object-sub">{{ p.short }}</p>
                    </div>

                    <div class="object-bottom">
                        <span>{% trans "–ó–∞–ø—Ä–æ—Å–∏—Ç—å –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é" %}</span>
                        <span>‚Üí</span>
                    </div>
                </div>
            </a>
        {% endfor %}
    </div>
</section>

<!-- –ì–ê–õ–ï–†–ï–Ø -->
<section id="gallery" class="section">
    <div class="section-head">
        <div class="section-title">{% trans "–ì–∞–ª–µ—Ä–µ—è" %}</div>
        <div class="section-note d-none d-sm-block">{% trans "–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ / —Ñ–æ—Ç–æ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞." %}</div>
    </div>

    <div class="gallery-grid">
        {% for img in gallery_images %}
            <div class="gallery-item">
                <div class="gallery-bg" style="background-image:url('{% static img %}')"></div>
                <div class="gallery-overlay"></div>
            </div>
        {% endfor %}
    </div>
</section>

<!-- –†–ê–°–°–†–û–ß–ö–ê / –ò–ü–û–¢–ï–ö–ê -->
<section id="installment" class="section">
    <div class="installment-row">
        <div class="installment-card">
            <div class="installment-inner">
                <div class="installment-badge">üí≥ {% trans "–†–∞—Å—Å—Ä–æ—á–∫–∞ –∏ –∏–ø–æ—Ç–µ–∫–∞" %}</div>
                <div class="installment-title">{% trans "–ö–æ–º—Ñ–æ—Ä—Ç–Ω—ã–π –≥—Ä–∞—Ñ–∏–∫ –ø–ª–∞—Ç–µ–∂–µ–π" %}</div>
                <ul class="installment-points">
                    <li>{% trans "–†–∞—Å—Å—Ä–æ—á–∫–∞ –¥–æ 36 –º–µ—Å—è—Ü–µ–≤;" %}</li>
                    <li>{% trans "–ü–æ–º–æ—â—å –≤ –∏–ø–æ—Ç–µ–∫–µ (–±–∞–Ω–∫–∏-–ø–∞—Ä—Ç–Ω—ë—Ä—ã);" %}</li>
                    <li>{% trans "–ü–æ–¥–±–æ—Ä –∫–≤–∞—Ä—Ç–∏—Ä—ã –ø–æ–¥ –±—é–¥–∂–µ—Ç;" %}</li>
                    <li>{% trans "–°–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤." %}</li>
                </ul>
                <a href="{% url 'public_site:contacts' %}" class="eln-btn-primary">{% trans "–û–±—Å—É–¥–∏—Ç—å —É—Å–ª–æ–≤–∏—è" %}</a>
            </div>
        </div>

        <div class="mini-calc">
            <div style="font-weight:800; margin-bottom:4px;"{% trans "–ü—Ä–∏–º–µ—Ä —Ä–∞—Å—á—ë—Ç–∞" %}</div>
            <div style="font-size:12px; color:#666; margin-bottom:6px;">
                {% trans "*–ü—Ä–∏–º–µ—Ä. –¢–æ—á–Ω—ã–π —Ä–∞—Å—á—ë—Ç –¥–∞—Å—Ç –º–µ–Ω–µ–¥–∂–µ—Ä." %}
            </div>

            <div class="mini-calc-row"><span>{% trans "–°—Ç–æ–∏–º–æ—Å—Ç—å</span><span>80 000 $" %}/span></div>
            <div class="mini-calc-row"><span>{% trans "–ü–µ—Ä–≤—ã–π –≤–∑–Ω–æ—Å</span><span>24 000 $" %}</span></div>
            <div class="mini-calc-row"><span>{% trans "–û—Å—Ç–∞—Ç–æ–∫</span><span>56 000 $" %}</span></div>
            <div class="mini-calc-row"><span>{% trans "24 –º–µ—Å</span><span>‚âà 2 333 $/–º–µ—Å" %}</span></div>

            <div style="font-size:12px; color:#777; margin-top:8px;">
                {% trans "–ù–∞–ø–∏—à–∏—Ç–µ –≤ WhatsApp/Telegram ‚Äî –ø–æ–¥–±–µ—Ä—ë–º –≤–∞—Ä–∏–∞–Ω—Ç –æ–ø–ª–∞—Ç—ã." %}
            </div>
        </div>
    </div>
</section>

{% endblock %}
